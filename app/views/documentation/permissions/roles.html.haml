-#  Copyright (c) 2012-2016, Puzzle ITC GmbH. This file is part of
-#  hitobito and licensed under the Affero General Public License version 3
-#  or later. See the COPYING file at the top-level directory or at
-#  https://github.com/hitobito/hitobito.

.accordion#roles
  - layer_index = 0
  - Role::TypeList.new(Group.root_types.first).each do |layer, groups|
    .accordion-group
      .accordion-heading
        %a{class: 'accordion-toggle', 'data-toggle' => 'collapse', 'data-parent' => '#roles', href: "#layer_#{layer_index}"}
          %h2= "#{t('.layer')}: #{layer} (#{groups.length} #{Group.model_name.human(count: groups.length)})"
      .accordion-body.collapse{id: "layer_#{layer_index}"}
        .accordion-inner
          - groups.each do|group, roles|
            %h3= group
            - roles.each do |role|
              %h4
                %span{rel: 'tooltip', title: "#{Role.model_name.human} (#{role.model_name})"}
                  = icon(:user)
                  = role.model_name.human

              = human_role_kind_permissions(role)
    - layer_index += 1
