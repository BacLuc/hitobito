-#  Copyright (c) 2012-2013, Jungwacht Blauring Schweiz. This file is part of
-#  hitobito and licensed under the Affero General Public License version 3
-#  or later. See the COPYING file at the top-level directory or at
-#  https://github.com/hitobito/hitobito.

- title @group.to_s

- content_for(:filter, FilterNavigation::People.new(self, @group, params[:name], params[:role_type_ids], params[:kind]))

= paginate @people

/ pf 10.03.14

= content_for :nav_left do
  %ul.nav-left-list
    %li.nav-left-back
      %a{:href => "#"} < Zu übergeordnete Ebene
    %li
      %h3
        %a{:href => ""} Kanton Bern
      %span.muted Abteilungen
      %ul
        %li
          %a{:href => "#"} Zollikoffen
        %li
          %a{:href => "#"} Aare
          %ul
            %li
              %a{:href => "#"} Bern
            %li
              %a{:href => "#"} Neuhaus
        %li
          %a{:href => "#"} Metropolis
        %li
          %a{:href => "#"} Gotham City

%div.table-responsive
  %table.table.table-striped.table-hover
    %thead
      %tr
        %th
        %th Name
        %th Rollen
        %th E-Mail
        %th Telefonnummern
        %th Adresse
    %tbody
      %tr#person_774
        %td
          .profil
            %img{alt: "Profil_thumb", height: "32", src: "/assets/profil_thumb.png", width: "32"}/
        %td
          %strong
            %a{href: "/de/groups/1/people/774"} Bruce Wayne
            %br/
            %span.muted
        %td
          %p
            Mitarbeiter Justice Ligue
            = link_to(icon(:edit), '#', title: ti(:"link.edit"))
        %td.nowrap
          %p
            %a{href: "mailto:olivier.brian@bfh.ch"} bruce.wayne@wayne-enterprise.us
        %td
        %td
          %p
      %tr#person_776
        %td
          .profil
            %img{alt: "Profil_thumb", height: "32", src: "/assets/profil_thumb.png", width: "32"}/
        %td
          %strong
            %a{href: "/de/groups/1/people/776"} Clark Kent
            %br/
            %span.muted
        %td
          %p Team
          %p Arbeitsgruppe

          %form.in-context
            %fieldset
              .control-group
                %label.control-label{for: "role_group_id"} Gruppe
                .controls
                  #role_type_select
                    %select#role_type.chosen-select
                      %option{value: ""} Bitte auswählen
                      %option{value: "Group::TopLayer::Administrator"} PBS
                      %option{value: "Group::TopLayer::Leader"} Team
                      %option{value: "Group::TopLayer::Member"} Leitung

              .control-group
                %label.control-label{for: "role_type"} Rolle
                .controls
                  #role_type_select
                    %select#role_type.chosen-select
                      %option{value: ""} Bitte auswählen
                      %option{value: "Group::TopLayer::Administrator"} Administrator
                      %option{value: "Group::TopLayer::Leader"} Leitung
                      %option{value: "Group::TopLayer::Member"} Mitglied
                      %option{value: "Role::AddressAdmin"} Leitung Kernaufgabe Kommunikation
                      %option{value: "Role::DispatchAddress"} Versandadresse
                      %option{value: "Role::External"} Extern

              .control-group
                %label.control-label{for: "role_label"} Bezeichnung
                .controls
                  %input#role_label.span6{autocomplete: "off", "data-provide" => "typeahead", "data-source" => "[\"\",\"Mitglied einer Verbandsleitung\",\"Other role\"]", maxlength: "255", name: "role[label]", size: "255", type: "text", placeholder: "Optionale Bezeichnung der Rolle dieser Person"}/
              .btn-toolbar
                .btn-group
                  %button.btn.btn-primary{"data-disable-with" => "Speichern", name: "button", type: "submit"} Speichern
                %a.link{href: "/de/groups/1"} Abbrechen
          %p Team
          %p Arbeitsgruppe

        %td.nowrap
          %p
            %a{href: "mailto:fritsch@puzzle.ch"} kent@dailyplanet.us
        %td.nowrap
          %p
            +49-8384-92699055
            %span.muted Privat
            = succeed "(01912)" do
              %br/
            %span.muted Andere
        %td
          %p> Central place 112
          86704 Metropolis
//


= crud_table do |t|
  - t.col('') do |p|
    .profil= image_tag(p.picture.thumb.url, size: '32x32')
  - t.col(Person.human_attribute_name(:name)) do |p|
    %strong
      -# Any person listed can be shown
      = link_to(p.to_s(:list), @multiple_groups ? group_person_path(p.default_group_id, p) : group_person_path(@group, p))
      %br/
      = muted p.additional_name
  - t.col(Role.model_name.human(count: 2))        { |p| p.roles_short(@multiple_groups ? nil : @group) }
  - t.col(Person.human_attribute_name(:email))    { |p| p.primary_email }
  - t.col(PhoneNumber.model_name.human(count: 2)) { |p| p.all_phone_numbers(!index_full_ability?) }
  - t.col(Person.human_attribute_name(:address))  { |p| p.complete_address }


= paginate @people
