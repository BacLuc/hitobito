-#  Copyright (c) 2012-2016, Dachverband Schweizer Jugendparlamente. This file is part of
-#  hitobito_dsj and licensed under the Affero General Public License version 3
-#  or later. See the COPYING file at the top-level directory or at
-#  https://github.com/hitobito/hitobito_dsj.

%h2#person-notes= Person::Note.model_name.human(count: 2)

- if can?(:create, Person::Note)
  %button.btn#person-notes-new-button{onclick: 'App.PersonNotes.showForm()'}= t('.new_note')

  #person-notes-form{style: 'display: none;'}
    %h3= t('.new_note')
    = standard_form(Person::Note.new, {url: group_person_notes_path(@group, entry)}) do |f|
      = hidden_field_tag('return_url', group_person_path(@group, entry, anchor: 'person-notes'))
      = f.labeled_text_area(:text)
      = save_form_buttons(f, nil, 'javascript:App.PersonNotes.cancelForm()')

= render 'notes_list', notes: entry.notes, show_person: false
